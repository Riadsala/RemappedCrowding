function gzData = dynamicWhiteNoise(duration, stim, pregennoise, isSaccade, targetSide, params, stimuliScrn, iLink)

duration = min(duration, 1.500);
t0 = GetSecs;

gzData = [];
while GetSecs-t0 < duration
tic
    evt = Eyelink('NewestFloatSample');
    x = round(max(evt.gx)) - params.midX;
    y = round(max(evt.gy)) - params.midY;
    t = GetSecs;
    gzData = [gzData; x y t];
 
    
    Screen('DrawTexture', stimuliScrn, tex);
    Screen(stimuliScrn, 'flip');
    Screen('Close', tex);
    WaitSecs(0.001);
   toc
end

end